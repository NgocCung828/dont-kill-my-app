---
name: AOSP (Pixel, Nexus...)
manufacturer:
  - stock_android
  - google
redirect_from: /vendors/stock_android.html
explanation: "\"\nNa Pixelech a Nexusech máte nejmenší šanci, že se něco pokazí s procesy na pozadí, ale i tak existuje\nněkolik věcí, které je potřeba zkontrolovat!\nOd zavedení [Doze módu](https://developer.android.com/training/monitoring-device state/doze-standby) v Android 6+ již některé věci nejsou možné nebo mají paradoxně větší spotřebu baterie než předtím (např. shromažďování dat ze senzoru prostřednictvím dávkování senzoru,viz [Řešení pro vývojáře](#dev-solution)) - u aplikací využívající takové funkcionality možná budete muset aplikaci vyřadit z optimalizace baterie, aby fungovala správně.\nso a serious Doze mode bug in Android 6.0 that prevented foreground services from doing their intended job (see [Solution for devs](#dev-solution) for workaround), but luckily this was later fixed in 7.0.\nAfter Android 8, users or even the system (Adaptive battery in Android 9) can decide to prevent your app's background processes from working and you may need to check the Background restrictions (or limits) option in your phone settings."
user_solution: "## Android P\nThere's a special option in **Settings > Apps > Your app > Advanced > Battery > Background restrictions**. If users accidentally enable this option, it will break their apps. And users do enable that option!\n## Pie and pre-Pie\nIf you see background processing issues, overall it is a good idea to make your app _not battery optimized_ to ensure it gets the freedom it needs to perform in the background.\nFor that:\n1. Go to **Settings > Apps > Your app > Advanced > Battery > Battery optimization**\n2. Change view to **All apps**\n3. Search for your app\n4. Choose **Not optimized**\n## Android O\nMake sure **Settings > Apps > Your app > Advanced > Battery > Background limitations** is not enabled. If the app is not yet optimized for Oreo API level it will break their background processing.\n## If all fails\nIf all fails you can turn doze mode completely off in **Settings > Developer options**. (If you don't know how to enable developer options, a web search-engine should help.)"
developer_solution: "## Android P Background restriction\nFor apps whose core functionality is background processing this option basically means 'Break the app core functionality' and this is not always obvious for users. You would be surprised how many support cases we look back on having spent hours debugging, only to find users enabled this. In our opinion this option is unnecessary or even evil. If users don't want the app to do its job, they can still force close or uninstall. Maybe this is a matter of naming as most users don't know what are background processes, but I guess whatever you do in terms of explanation it is so hard to understand (even for experienced users) what are all the consequences of this that there always will be people enabling it unintentionally.\n## Doze mode\nSome background processing scenarios are not possible anymore with Doze mode. For example low battery sensor logging\nusing sensor batching is no longer possible, due to the 9 minute limit on consecutive alarms. The only workaround is keeping a partial wake lock all the time, which means dramatically more battery is consumed for the same job.\nOr, a nasty hack to schedule a user-visible alarm though the setAlarmClock() method which can trigger more often.\nTips:\n* You can ask the user to make your app _not battery optimized_. See [https://developer.android.com/training/monitoring-device-state/doze-standby](https://developer.android.com/training/monitoring-device-state/doze-standby)\n## Android 6.0\nA serious bug in Doze mode in Android 6.0 which we (authors of this site) reported to Google (Dianne Hackborn) during the 6.0 BETA does not allow foreground services to keep a wake lock every time an activity or a broadcast receiver kicks in, see [https://plus.google.com/+AndroidDevelopers/posts/94jCkmG4jff](https://web.archive.org/web/20181030095832/https://plus.google.com/+AndroidDevelopers/posts/94jCkmG4jff) and search for Petr Nalevka and Dianne Hackborn.\nA workaround is to keep your foreground service in a separate process without any other Android components (read Activities, Receivers, Services…) in that process. This workaround is needed for all Android 6.0 devices but not needed on later devices where this is already fixed."
---

